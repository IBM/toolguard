{
  "created": 1756625949.0487092,
  "duration": 0.1386401653289795,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 1,
    "total": 2,
    "collected": 2
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py::test_transfer_for_reservation_details_violation",
          "type": "Function",
          "lineno": 7
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py::test_transfer_explicit_user_request_compliance",
          "type": "Function",
          "lineno": 39
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py::test_transfer_for_reservation_details_violation",
      "lineno": 7,
      "outcome": "failed",
      "keywords": [
        "test_transfer_for_reservation_details_violation",
        "test_guard_transfer_to_human_agent_conditions.py",
        "transfer_to_human_agents",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0011341250501573086,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.00163583317771554,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py",
          "lineno": 37,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py",
            "lineno": 37,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_transfer_for_reservation_details_violation():\n        \"\"\"\n        Policy: Transfer only if explicitly requested or cannot be resolved with available tools.\n        Example: \"A user asks for details about their reservation ID '8JX2WO'... This violates the policy as the issue can be resolved with the available tool.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        # Mock dependent tools\n        api.get_reservation_details.side_effect = lambda reservation_id: Reservation(\n            reservation_id=reservation_id,\n            user_id=\"user123\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"one_way\",\n            cabin=\"economy\",\n            flights=[],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        ) if reservation_id == \"8JX2WO\" else None\n        api.get_flight_status.side_effect = lambda *args, **kwargs: \"on time\"\n        api.calculate.side_effect = lambda expr: str(eval(expr))\n        api.update_reservation_flights.side_effect = lambda *args, **kwargs: None\n        api.search_direct_flight.side_effect = lambda *args, **kwargs: []\n        api.list_all_airports.side_effect = lambda: []\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py:37: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: Transfer only if explicitly requested or cannot be resolved with available tools.\n    Example: \"A user asks for details about their reservation ID '8JX2WO'... This violates the policy as the issue can be resolved with the available tool.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.0001860838383436203,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_transfer_to_human_agent_conditions.py::test_transfer_explicit_user_request_compliance",
      "lineno": 39,
      "outcome": "passed",
      "keywords": [
        "test_transfer_explicit_user_request_compliance",
        "test_guard_transfer_to_human_agent_conditions.py",
        "transfer_to_human_agents",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00011833291500806808,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007923338562250137,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: Transfer only if explicitly requested or cannot be resolved with available tools.\n    Example: \"A user explicitly requests to be transferred to a human agent stating: 'I need to speak with a real person about my bill.'\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010949978604912758,
        "outcome": "passed"
      }
    }
  ]
}