{
  "created": 1756626001.039306,
  "duration": 0.12136983871459961,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 1,
    "total": 2,
    "collected": 2
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py::test_transfer_when_first_segment_flown",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py::test_violation_attempt_cancel_flown_segment",
          "type": "Function",
          "lineno": 39
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py::test_transfer_when_first_segment_flown",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_transfer_when_first_segment_flown",
        "test_guard_flight_segment_transfer_condition.py",
        "transfer_to_human_agents",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0010011671110987663,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007832078263163567,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: If a user requests to cancel a trip and any segments have already been flown, transfer the user to a human agent.\n    Example: A user requests to cancel their trip, and it is found that the first segment has already been flown. The system properly transfers the user's request to a human agent.\n    "
        }
      ],
      "teardown": {
        "duration": 0.00020425021648406982,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py::test_violation_attempt_cancel_flown_segment",
      "lineno": 39,
      "outcome": "failed",
      "keywords": [
        "test_violation_attempt_cancel_flown_segment",
        "test_guard_flight_segment_transfer_condition.py",
        "transfer_to_human_agents",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00011841580271720886,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0013281251303851604,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py",
          "lineno": 67,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py",
            "lineno": 67,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_violation_attempt_cancel_flown_segment():\n        \"\"\"\n        Policy: If a user requests to cancel a trip and any segments have already been flown, transfer the user to a human agent.\n        Example: The user requests to cancel a trip that has already been fully or partially flown. The system attempts to process the cancellation without transferring the user to a human agent.\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"RES456\",\n            user_id=\"USER456\",\n            origin=\"LAX\",\n            destination=\"ORD\",\n            flight_type=\"one_way\",\n            cabin=\"business\",\n            flights=[\n                ReservationFlight(flight_number=\"FL789\", origin=\"LAX\", destination=\"ORD\", date=\"2024-05-02\", price=500)\n            ],\n            passengers=[Passenger(first_name=\"Jane\", last_name=\"Smith\", dob=\"1985-05-05\")],\n            payment_history=[Payment(payment_id=\"PAY456\", amount=500)],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=2,\n            nonfree_baggages=1,\n            insurance=\"yes\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda reservation_id: reservation if reservation_id == \"RES456\" else None\n        api.get_flight_status.side_effect = lambda flight_number, date: \"landed\" if (flight_number, date) == (\"FL789\", \"2024-05-02\") else \"available\"\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/transfer_to_human_agents/test_guard_flight_segment_transfer_condition.py:67: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: If a user requests to cancel a trip and any segments have already been flown, transfer the user to a human agent.\n    Example: The user requests to cancel a trip that has already been fully or partially flown. The system attempts to process the cancellation without transferring the user to a human agent.\n    "
        }
      ],
      "teardown": {
        "duration": 0.00017966702580451965,
        "outcome": "passed"
      }
    }
  ]
}