{
  "created": 1756625962.6716642,
  "duration": 0.11806726455688477,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 1,
    "total": 3,
    "collected": 3
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py::test_cancel_within_24_hours",
          "type": "Function",
          "lineno": 9
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py::test_cancel_airline_cancelled_flight",
          "type": "Function",
          "lineno": 38
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py::test_violation_no_policy_check",
          "type": "Function",
          "lineno": 67
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py::test_cancel_within_24_hours",
      "lineno": 9,
      "outcome": "passed",
      "keywords": [
        "test_cancel_within_24_hours",
        "test_guard_strict_cancellation_rules_enforcement.py",
        "cancel_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0007339171133935452,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007028332911431789,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"All reservations can be cancelled within 24 hours of booking\"\n    Example: \"An agent checks that a reservation was booked less than 24 hours ago and cancels it accordingly, ensuring compliance with the policy.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010620802640914917,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py::test_cancel_airline_cancelled_flight",
      "lineno": 38,
      "outcome": "passed",
      "keywords": [
        "test_cancel_airline_cancelled_flight",
        "test_guard_strict_cancellation_rules_enforcement.py",
        "cancel_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.604217484593391e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0014255000278353691,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"All reservations can be cancelled if the airline cancelled the flight\"\n    Example: \"An agent verifies that a flight was cancelled by the airline before executing cancellation to comply with policy rules.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00011374987661838531,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py::test_violation_no_policy_check",
      "lineno": 67,
      "outcome": "failed",
      "keywords": [
        "test_violation_no_policy_check",
        "test_guard_strict_cancellation_rules_enforcement.py",
        "cancel_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 8.679088205099106e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0006177499890327454,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py",
          "lineno": 94,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py",
            "lineno": 94,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_violation_no_policy_check():\n        \"\"\"\n        Policy: Must check airline cancellation or within 24 hours before cancelling\n        Example: \"An agent attempts to cancel a reservation without checking if the airline has cancelled the flight or if it's within the 24-hour booking period, violating policy conditions.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        created_at = (datetime.now() - timedelta(days=3)).strftime(\"%Y-%m-%dT%H:%M:%S\")\n        reservation = Reservation(\n            reservation_id=\"GHI789\",\n            user_id=\"user3\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL456\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=500)],\n            passengers=[],\n            payment_history=[],\n            created_at=created_at,\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"GHI789\" else None\n        api.get_flight_instance.side_effect = lambda fn, date: FlightDateStatusAvailable(status=\"available\", available_seats={\"business\": 1, \"economy\": 1, \"basic_economy\": 1}, prices={\"business\": 1000, \"economy\": 500, \"basic_economy\": 300})\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/cancel_reservation/test_guard_strict_cancellation_rules_enforcement.py:94: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: Must check airline cancellation or within 24 hours before cancelling\n    Example: \"An agent attempts to cancel a reservation without checking if the airline has cancelled the flight or if it's within the 24-hour booking period, violating policy conditions.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.0001609581522643566,
        "outcome": "passed"
      }
    }
  ]
}