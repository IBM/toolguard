{
  "created": 1756625971.582888,
  "duration": 0.1322638988494873,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 3,
    "total": 4,
    "collected": 4
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_with_all_segments_included",
          "type": "Function",
          "lineno": 10
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_with_only_altered_segment",
          "type": "Function",
          "lineno": 48
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_excludes_connecting_segments",
          "type": "Function",
          "lineno": 85
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_excludes_ancillary_service_segments",
          "type": "Function",
          "lineno": 122
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments",
          "type": "Class",
          "lineno": null
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_with_all_segments_included",
      "lineno": 10,
      "outcome": "passed",
      "keywords": [
        "test_update_with_all_segments_included",
        "TestGuardConsistencyAcrossFlightSegments",
        "test_guard_consistency_across_flight_segments.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00081250024959445,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0006743334233760834,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: \"When updating a reservation, all flight segments must be included in the list of flights provided, regardless of whether they have been altered or not.\"\n        Example: \"A user's round-trip reservation is successfully updated with all flights listed, including the unchanged return flight segment, adhering to the policy requirement.\"\n        "
        }
      ],
      "teardown": {
        "duration": 0.00010112486779689789,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_with_only_altered_segment",
      "lineno": 48,
      "outcome": "failed",
      "keywords": [
        "test_update_with_only_altered_segment",
        "TestGuardConsistencyAcrossFlightSegments",
        "test_guard_consistency_across_flight_segments.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 8.933292701840401e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0004999996162950993,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
          "lineno": 83,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
            "lineno": 83,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <test_guard_consistency_across_flight_segments.TestGuardConsistencyAcrossFlightSegments object at 0x1064da9c0>\n\n    def test_update_with_only_altered_segment(self):\n        \"\"\"\n        Policy: \"When updating a reservation, all flight segments must be included in the list of flights provided, regardless of whether they have been altered or not.\"\n        Example: \"A user attempts to update their reservation but only includes the altered flight segment in the flights array, omitting the unchanged flight segments.\"\n        \"\"\"\n    \n        # Mock reservation with two segments\n        reservation = Reservation(\n            reservation_id=\"ZFA04Y\",\n            user_id=\"user123\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[\n                ReservationFlight(flight_number=\"HAT001\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300),\n                ReservationFlight(flight_number=\"HAT002\", origin=\"JFK\", destination=\"SFO\", date=\"2024-06-10\", price=320)\n            ],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"ZFA04Y\" else None\n    \n        flights = [\n            FlightInfo(flight_number=\"HAT001\", date=\"2024-06-01\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_consistency_across_flight_segments.py:83: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: \"When updating a reservation, all flight segments must be included in the list of flights provided, regardless of whether they have been altered or not.\"\n        Example: \"A user attempts to update their reservation but only includes the altered flight segment in the flights array, omitting the unchanged flight segments.\"\n        "
        }
      ],
      "teardown": {
        "duration": 0.00017195800319314003,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_excludes_connecting_segments",
      "lineno": 85,
      "outcome": "failed",
      "keywords": [
        "test_update_excludes_connecting_segments",
        "TestGuardConsistencyAcrossFlightSegments",
        "test_guard_consistency_across_flight_segments.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.916722774505615e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0006070826202630997,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
          "lineno": 120,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
            "lineno": 120,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <test_guard_consistency_across_flight_segments.TestGuardConsistencyAcrossFlightSegments object at 0x106af8f50>\n\n    def test_update_excludes_connecting_segments(self):\n        \"\"\"\n        Policy: \"When updating a reservation, all flight segments must be included in the list of flights provided, regardless of whether they have been altered or not.\"\n        Example: \"An agent updates the reservation for a flight change but mistakenly excludes connecting segments that were part of the same trip, leading to an incomplete submission.\"\n        \"\"\"\n    \n        # Mock reservation with three segments (one connection)\n        reservation = Reservation(\n            reservation_id=\"ZFA04Y\",\n            user_id=\"user123\",\n            origin=\"SFO\",\n            destination=\"LHR\",\n            flight_type=\"one_way\",\n            cabin=\"business\",\n            flights=[\n                ReservationFlight(flight_number=\"HAT100\", origin=\"SFO\", destination=\"JFK\", date=\"2024-07-01\", price=200),\n                ReservationFlight(flight_number=\"HAT200\", origin=\"JFK\", destination=\"LHR\", date=\"2024-07-02\", price=500)\n            ],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"ZFA04Y\" else None\n    \n        flights = [\n            FlightInfo(flight_number=\"HAT100\", date=\"2024-07-01\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_consistency_across_flight_segments.py:120: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: \"When updating a reservation, all flight segments must be included in the list of flights provided, regardless of whether they have been altered or not.\"\n        Example: \"An agent updates the reservation for a flight change but mistakenly excludes connecting segments that were part of the same trip, leading to an incomplete submission.\"\n        "
        }
      ],
      "teardown": {
        "duration": 0.00010579172521829605,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py::TestGuardConsistencyAcrossFlightSegments::test_update_excludes_ancillary_service_segments",
      "lineno": 122,
      "outcome": "failed",
      "keywords": [
        "test_update_excludes_ancillary_service_segments",
        "TestGuardConsistencyAcrossFlightSegments",
        "test_guard_consistency_across_flight_segments.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00010070810094475746,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0004954580217599869,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
          "lineno": 157,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_consistency_across_flight_segments.py",
            "lineno": 157,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <test_guard_consistency_across_flight_segments.TestGuardConsistencyAcrossFlightSegments object at 0x106af91f0>\n\n    def test_update_excludes_ancillary_service_segments(self):\n        \"\"\"\n        Policy: \"When updating a reservation, all flight segments must be included in the list of flights provided, regardless of whether they have been altered or not.\"\n        Example: \"During a reservation update involving a cabin class upgrade, the flights array only lists flights under the new cabin class, excluding previously booked ancillary services segments, violating the policy.\"\n        \"\"\"\n    \n        # Mock reservation with main flight and ancillary service segment\n        reservation = Reservation(\n            reservation_id=\"ZFA04Y\",\n            user_id=\"user123\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"one_way\",\n            cabin=\"economy\",\n            flights=[\n                ReservationFlight(flight_number=\"HAT300\", origin=\"SFO\", destination=\"JFK\", date=\"2024-08-01\", price=300),\n                ReservationFlight(flight_number=\"ANC001\", origin=\"JFK\", destination=\"JFK\", date=\"2024-08-01\", price=50)\n            ],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"ZFA04Y\" else None\n    \n        flights = [\n            FlightInfo(flight_number=\"HAT300\", date=\"2024-08-01\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_consistency_across_flight_segments.py:157: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: \"When updating a reservation, all flight segments must be included in the list of flights provided, regardless of whether they have been altered or not.\"\n        Example: \"During a reservation update involving a cabin class upgrade, the flights array only lists flights under the new cabin class, excluding previously booked ancillary services segments, violating the policy.\"\n        "
        }
      ],
      "teardown": {
        "duration": 0.00018700025975704193,
        "outcome": "passed"
      }
    }
  ]
}