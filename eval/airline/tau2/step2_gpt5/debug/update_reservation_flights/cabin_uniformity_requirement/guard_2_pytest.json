{
  "created": 1756626043.199142,
  "duration": 0.16211199760437012,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 2,
    "total": 5,
    "collected": 5
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_all_flights_same_cabin_economy",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_all_flights_same_cabin_business",
          "type": "Function",
          "lineno": 45
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_round_trip_same_cabin_economy",
          "type": "Function",
          "lineno": 82
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_mixed_cabin_classes_economy_business",
          "type": "Function",
          "lineno": 119
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_mixed_cabin_classes_economy_basic",
          "type": "Function",
          "lineno": 154
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_all_flights_same_cabin_economy",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_all_flights_same_cabin_economy",
        "test_guard_cabin_uniformity_requirement.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0008462090045213699,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007269168272614479,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Cabin class must be the same across all flights in a reservation.\"\n    Example: \"A user updates a reservation so all flights are reassigned to economy class, ensuring uniform cabin class and complying with the policy.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010124966502189636,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_all_flights_same_cabin_business",
      "lineno": 45,
      "outcome": "passed",
      "keywords": [
        "test_all_flights_same_cabin_business",
        "test_guard_cabin_uniformity_requirement.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.424984455108643e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0005087503232061863,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Cabin class must be the same across all flights in a reservation.\"\n    Example: \"The reservation is modified to have all flights in business class, maintaining a consistent cabin class across the entire reservation as per the policy.\"\n    "
        }
      ],
      "teardown": {
        "duration": 9.087473154067993e-05,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_round_trip_same_cabin_economy",
      "lineno": 82,
      "outcome": "passed",
      "keywords": [
        "test_round_trip_same_cabin_economy",
        "test_guard_cabin_uniformity_requirement.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 8.595921099185944e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0010999580845236778,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Cabin class must be the same across all flights in a reservation.\"\n    Example: \"Both flight segments in a round-trip reservation are changed to the same cabin class, such as economy, meeting the Cabin Uniformity Requirement.\"\n    "
        }
      ],
      "teardown": {
        "duration": 9.55839641392231e-05,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_mixed_cabin_classes_economy_business",
      "lineno": 119,
      "outcome": "failed",
      "keywords": [
        "test_mixed_cabin_classes_economy_business",
        "test_guard_cabin_uniformity_requirement.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 8.787494152784348e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0005239173769950867,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py",
          "lineno": 152,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py",
            "lineno": 152,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_mixed_cabin_classes_economy_business():\n        \"\"\"\n        Policy: \"Cabin class must be the same across all flights in a reservation.\"\n        Example: \"A reservation is updated with mixed cabin classes, such as economy and business, across different flights within the same reservation. This violates the policy requiring uniform cabin class.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"MIX001\",\n            user_id=\"user321\",\n            origin=\"BOS\",\n            destination=\"ATL\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[\n                ReservationFlight(flight_number=\"MIXECO\", origin=\"BOS\", destination=\"ATL\", date=\"2024-09-01\", price=350),\n                ReservationFlight(flight_number=\"MIXBUS\", origin=\"ATL\", destination=\"BOS\", date=\"2024-09-10\", price=900)\n            ],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"MIX001\" else None\n    \n        flights = [\n            FlightInfo(flight_number=\"MIXECO\", date=\"2024-09-01\"),\n            FlightInfo(flight_number=\"MIXBUS\", date=\"2024-09-10\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py:152: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Cabin class must be the same across all flights in a reservation.\"\n    Example: \"A reservation is updated with mixed cabin classes, such as economy and business, across different flights within the same reservation. This violates the policy requiring uniform cabin class.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00016012508422136307,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py::test_mixed_cabin_classes_economy_basic",
      "lineno": 154,
      "outcome": "failed",
      "keywords": [
        "test_mixed_cabin_classes_economy_basic",
        "test_guard_cabin_uniformity_requirement.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.50000248849392e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.000630625057965517,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py",
          "lineno": 187,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py",
            "lineno": 187,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_mixed_cabin_classes_economy_basic():\n        \"\"\"\n        Policy: \"Cabin class must be the same across all flights in a reservation.\"\n        Example: \"A user changes one flight to economy and another to basic economy within a reservation, failing the Cabin Uniformity Requirement that mandates the same cabin class for all flights.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"MIX002\",\n            user_id=\"user654\",\n            origin=\"DFW\",\n            destination=\"LAS\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[\n                ReservationFlight(flight_number=\"ECO123\", origin=\"DFW\", destination=\"LAS\", date=\"2024-10-01\", price=200),\n                ReservationFlight(flight_number=\"BAS456\", origin=\"LAS\", destination=\"DFW\", date=\"2024-10-05\", price=150)\n            ],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"MIX002\" else None\n    \n        flights = [\n            FlightInfo(flight_number=\"ECO123\", date=\"2024-10-01\"),\n            FlightInfo(flight_number=\"BAS456\", date=\"2024-10-05\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_cabin_uniformity_requirement.py:187: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Cabin class must be the same across all flights in a reservation.\"\n    Example: \"A user changes one flight to economy and another to basic economy within a reservation, failing the Cabin Uniformity Requirement that mandates the same cabin class for all flights.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00016304198652505875,
        "outcome": "passed"
      }
    }
  ]
}