{
  "created": 1756625966.749442,
  "duration": 0.12711811065673828,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 2,
    "total": 3,
    "collected": 3
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py::test_update_business_reservation_same_route",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py::test_change_basic_economy_origin_destination",
          "type": "Function",
          "lineno": 42
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py::test_change_trip_type_for_economy",
          "type": "Function",
          "lineno": 77
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py::test_update_business_reservation_same_route",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_update_business_reservation_same_route",
        "test_guard_cannot_modify_basic_economy_flights.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0007798750884830952,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0008925409056246281,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Basic economy flights in a reservation cannot be modified at all. For reservations that are not classified as basic economy, modifications are allowed but must not change the origin, destination, or trip type.\"\n    Example: \"An agent successfully updates a 'business' reservation by changing the flight times, keeping the same origin 'SFO' and destination 'JFK' without altering the trip type from 'round_trip', ensuring compliance with the policy.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00011749984696507454,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py::test_change_basic_economy_origin_destination",
      "lineno": 42,
      "outcome": "failed",
      "keywords": [
        "test_change_basic_economy_origin_destination",
        "test_guard_cannot_modify_basic_economy_flights.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00010408274829387665,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0012350422330200672,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py",
          "lineno": 75,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py",
            "lineno": 75,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_change_basic_economy_origin_destination():\n        \"\"\"\n        Policy: \"Basic economy flights in a reservation cannot be modified at all.\"\n        Example: \"A user attempts to change a reservation with basic economy flights by providing a new itinerary with updated origin and destination details, violating the restriction on modifying basic economy flights.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"RES456\",\n            user_id=\"USER2\",\n            origin=\"LAX\",\n            destination=\"ORD\",\n            flight_type=\"round_trip\",\n            cabin=\"basic_economy\",\n            flights=[ReservationFlight(flight_number=\"FL456\", date=\"2024-06-10\", price=300, origin=\"LAX\", destination=\"ORD\")],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"RES456\" else None\n        api.get_scheduled_flight.side_effect = lambda fn: Flight(\n            flight_number=fn,\n            origin=\"SFO\",\n            destination=\"JFK\",\n            scheduled_departure_time_est=\"08:00:00\",\n            scheduled_arrival_time_est=\"16:00:00\",\n            dates={}\n        )\n        flights = [FlightInfo(flight_number=\"FL789\", date=\"2024-06-10\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py:75: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Basic economy flights in a reservation cannot be modified at all.\"\n    Example: \"A user attempts to change a reservation with basic economy flights by providing a new itinerary with updated origin and destination details, violating the restriction on modifying basic economy flights.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00018958328291773796,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py::test_change_trip_type_for_economy",
      "lineno": 77,
      "outcome": "failed",
      "keywords": [
        "test_change_trip_type_for_economy",
        "test_guard_cannot_modify_basic_economy_flights.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.999983012676239e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0006897919811308384,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py",
          "lineno": 110,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py",
            "lineno": 110,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_change_trip_type_for_economy():\n        \"\"\"\n        Policy: \"For reservations that are not classified as basic economy, modifications are allowed but must not change the origin, destination, or trip type.\"\n        Example: \"An agent attempts to update a reservation classified as 'economy' by changing the trip type from 'round_trip' to 'one_way', which violates the policy of maintaining trip type for non-basic reservations.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"RES789\",\n            user_id=\"USER3\",\n            origin=\"BOS\",\n            destination=\"MIA\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL321\", date=\"2024-07-01\", price=400, origin=\"BOS\", destination=\"MIA\")],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"yes\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"RES789\" else None\n        api.get_scheduled_flight.side_effect = lambda fn: Flight(\n            flight_number=fn,\n            origin=\"BOS\",\n            destination=\"MIA\",\n            scheduled_departure_time_est=\"09:00:00\",\n            scheduled_arrival_time_est=\"12:00:00\",\n            dates={}\n        )\n        flights = [FlightInfo(flight_number=\"FL321\", date=\"2024-07-01\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_cannot_modify_basic_economy_flights.py:110: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"For reservations that are not classified as basic economy, modifications are allowed but must not change the origin, destination, or trip type.\"\n    Example: \"An agent attempts to update a reservation classified as 'economy' by changing the trip type from 'round_trip' to 'one_way', which violates the policy of maintaining trip type for non-basic reservations.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00016358308494091034,
        "outcome": "passed"
      }
    }
  ]
}