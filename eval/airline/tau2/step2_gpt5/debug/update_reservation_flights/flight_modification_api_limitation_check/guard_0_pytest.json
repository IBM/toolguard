{
  "created": 1756626004.050781,
  "duration": 0.13012409210205078,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 5,
    "total": 6,
    "collected": 6
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_update_times_preserve_details",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_basic_economy_unmodifiable",
          "type": "Function",
          "lineno": 36
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_origin_change_violation",
          "type": "Function",
          "lineno": 65
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_destination_change_violation",
          "type": "Function",
          "lineno": 94
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_trip_type_change_violation",
          "type": "Function",
          "lineno": 123
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_no_price_verification_violation",
          "type": "Function",
          "lineno": 152
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_update_times_preserve_details",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_update_times_preserve_details",
        "test_guard_flight_modification_api_limitation_check.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0007166657596826553,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007255417294800282,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Agents must verify the following before using the Flight Modification API: Basic economy flights are unmodifiable. For other flight reservations, ensure that origin, destination, and trip type remain unchanged from the initial booking. Prices for flight segments retained stay at original rates, not updated by the API. Manual validation of segment prices is required.\"\n    Example: \"An agent updates a reservation by changing the flight times while preserving the original cabin class, origin, destination, and trip type, complying with the policy requirements.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00011145835742354393,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_basic_economy_unmodifiable",
      "lineno": 36,
      "outcome": "failed",
      "keywords": [
        "test_basic_economy_unmodifiable",
        "test_guard_flight_modification_api_limitation_check.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.700004011392593e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0011096247471868992,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
          "lineno": 63,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
            "lineno": 63,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_basic_economy_unmodifiable():\n        \"\"\"\n        Policy: \"Basic economy flights are unmodifiable.\"\n        Example: \"An agent attempts to use the Flight Modification API to change the cabin class of a reservation booked under 'basic_economy'.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"BASIC1\",\n            user_id=\"user2\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"basic_economy\",\n            flights=[ReservationFlight(flight_number=\"FL124\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=200)],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"BASIC1\" else None\n        api.get_flight_instance.side_effect = lambda fn, date: FlightDateStatusAvailable(status=\"available\", available_seats={\"business\": 5, \"economy\": 5, \"basic_economy\": 5}, prices={\"business\": 500, \"economy\": 300, \"basic_economy\": 200})\n    \n        flights = [FlightInfo(flight_number=\"FL124\", date=\"2024-06-01\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py:63: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Basic economy flights are unmodifiable.\"\n    Example: \"An agent attempts to use the Flight Modification API to change the cabin class of a reservation booked under 'basic_economy'.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00018291641026735306,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_origin_change_violation",
      "lineno": 65,
      "outcome": "failed",
      "keywords": [
        "test_origin_change_violation",
        "test_guard_flight_modification_api_limitation_check.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00011087488383054733,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.000728290993720293,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
          "lineno": 92,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
            "lineno": 92,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_origin_change_violation():\n        \"\"\"\n        Policy: \"Origin must remain unchanged.\"\n        Example: \"The agent changes the origin from 'SFO' to 'LAX' in a reservation update.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"ORIG1\",\n            user_id=\"user3\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL125\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300)],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"ORIG1\" else None\n        api.get_flight_instance.side_effect = lambda fn, date: FlightDateStatusAvailable(status=\"available\", available_seats={\"business\": 5, \"economy\": 5, \"basic_economy\": 5}, prices={\"business\": 500, \"economy\": 300, \"basic_economy\": 200})\n    \n        flights = [FlightInfo(flight_number=\"FL126\", date=\"2024-06-01\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py:92: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Origin must remain unchanged.\"\n    Example: \"The agent changes the origin from 'SFO' to 'LAX' in a reservation update.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010733306407928467,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_destination_change_violation",
      "lineno": 94,
      "outcome": "failed",
      "keywords": [
        "test_destination_change_violation",
        "test_guard_flight_modification_api_limitation_check.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 8.808402344584465e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0005663749761879444,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
          "lineno": 121,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
            "lineno": 121,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_destination_change_violation():\n        \"\"\"\n        Policy: \"Destination must remain unchanged.\"\n        Example: \"Changing the destination from 'JFK' to 'BOS' during a reservation update.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"DEST1\",\n            user_id=\"user4\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL127\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300)],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"DEST1\" else None\n        api.get_flight_instance.side_effect = lambda fn, date: FlightDateStatusAvailable(status=\"available\", available_seats={\"business\": 5, \"economy\": 5, \"basic_economy\": 5}, prices={\"business\": 500, \"economy\": 300, \"basic_economy\": 200})\n    \n        flights = [FlightInfo(flight_number=\"FL128\", date=\"2024-06-01\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py:121: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Destination must remain unchanged.\"\n    Example: \"Changing the destination from 'JFK' to 'BOS' during a reservation update.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00013575004413723946,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_trip_type_change_violation",
      "lineno": 123,
      "outcome": "failed",
      "keywords": [
        "test_trip_type_change_violation",
        "test_guard_flight_modification_api_limitation_check.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00010220799595117569,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0006478750146925449,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
          "lineno": 150,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
            "lineno": 150,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_trip_type_change_violation():\n        \"\"\"\n        Policy: \"Trip type must remain unchanged.\"\n        Example: \"An agent updates a flight reservation from a 'round_trip' to a 'one_way' trip.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"TRIP1\",\n            user_id=\"user5\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL129\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300)],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"TRIP1\" else None\n        api.get_flight_instance.side_effect = lambda fn, date: FlightDateStatusAvailable(status=\"available\", available_seats={\"business\": 5, \"economy\": 5, \"basic_economy\": 5}, prices={\"business\": 500, \"economy\": 300, \"basic_economy\": 200})\n    \n        flights = [FlightInfo(flight_number=\"FL130\", date=\"2024-06-01\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py:150: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Trip type must remain unchanged.\"\n    Example: \"An agent updates a flight reservation from a 'round_trip' to a 'one_way' trip.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00015399977564811707,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py::test_no_price_verification_violation",
      "lineno": 152,
      "outcome": "failed",
      "keywords": [
        "test_no_price_verification_violation",
        "test_guard_flight_modification_api_limitation_check.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00011354172602295876,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0006027501076459885,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
          "lineno": 179,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py",
            "lineno": 179,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_no_price_verification_violation():\n        \"\"\"\n        Policy: \"Manual validation of segment prices is required.\"\n        Example: \"An agent uses the API to modify a flight reservation without manually verifying the prices of retained flight segments.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n        reservation = Reservation(\n            reservation_id=\"PRICE1\",\n            user_id=\"user6\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL131\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300)],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"PRICE1\" else None\n        api.get_flight_instance.side_effect = lambda fn, date: FlightDateStatusAvailable(status=\"available\", available_seats={\"business\": 5, \"economy\": 5, \"basic_economy\": 5}, prices={\"business\": 600, \"economy\": 400, \"basic_economy\": 200})\n    \n        flights = [FlightInfo(flight_number=\"FL131\", date=\"2024-06-01\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_flight_modification_api_limitation_check.py:179: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: \"Manual validation of segment prices is required.\"\n    Example: \"An agent uses the API to modify a flight reservation without manually verifying the prices of retained flight segments.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.0001116250641644001,
        "outcome": "passed"
      }
    }
  ]
}