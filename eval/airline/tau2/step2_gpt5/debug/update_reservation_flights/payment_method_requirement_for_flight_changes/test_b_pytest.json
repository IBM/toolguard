{
  "created": 1756626085.0738208,
  "duration": 0.1256399154663086,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 2,
    "total": 3,
    "collected": 3
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py::test_flight_change_with_valid_credit_card",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py::test_flight_change_without_payment_method",
          "type": "Function",
          "lineno": 49
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py::test_flight_change_with_certificate_only",
          "type": "Function",
          "lineno": 89
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py::test_flight_change_with_valid_credit_card",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_flight_change_with_valid_credit_card",
        "test_guard_payment_method_requirement_for_flight_changes.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0008148746564984322,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007624160498380661,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Whenever flights in a reservation are changed, ensure the user provides one valid gift card or credit card from their profile as the payment or refund method.\"\n    Example: \"The user requests a flight change and provides a valid credit card from their profile, satisfying the policy requirement for payment method.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010191695764660835,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py::test_flight_change_without_payment_method",
      "lineno": 49,
      "outcome": "failed",
      "keywords": [
        "test_flight_change_without_payment_method",
        "test_guard_payment_method_requirement_for_flight_changes.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00026570865884423256,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0014852923341095448,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py",
          "lineno": 87,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py",
            "lineno": 87,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_flight_change_without_payment_method():\n        \"\"\"\n        Policy: \"Whenever flights in a reservation are changed, ensure the user provides one valid gift card or credit card from their profile as the payment or refund method.\"\n        Example: \"A user attempts to change flights in a reservation without providing any valid payment information such as a gift card or credit card linked to their profile, which contravenes the policy.\"\n        \"\"\"\n        user = User(\n            user_id=\"user123\",\n            name=Name(first_name=\"John\", last_name=\"Doe\"),\n            address=Address(address1=\"123 Main St\", address2=None, city=\"New York\", country=\"USA\", state=\"NY\", zip=\"10001\"),\n            email=\"john.doe@example.com\",\n            dob=\"1980-01-01\",\n            payment_methods={},\n            saved_passengers=[],\n            membership=\"gold\",\n            reservations=[\"resv001\"]\n        )\n        reservation = Reservation(\n            reservation_id=\"resv001\",\n            user_id=\"user123\",\n            origin=\"JFK\",\n            destination=\"LAX\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL123\", origin=\"JFK\", destination=\"LAX\", date=\"2024-06-01\", price=300)],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api = MagicMock(spec=I_Airline)\n        api.get_user_details.side_effect = lambda uid: user if uid == \"user123\" else None\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"resv001\" else None\n    \n        flights = [FlightInfo(flight_number=\"FL123\", date=\"2024-06-02\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py:87: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Whenever flights in a reservation are changed, ensure the user provides one valid gift card or credit card from their profile as the payment or refund method.\"\n    Example: \"A user attempts to change flights in a reservation without providing any valid payment information such as a gift card or credit card linked to their profile, which contravenes the policy.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00017687492072582245,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py::test_flight_change_with_certificate_only",
      "lineno": 89,
      "outcome": "failed",
      "keywords": [
        "test_flight_change_with_certificate_only",
        "test_guard_payment_method_requirement_for_flight_changes.py",
        "update_reservation_flights",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.233318269252777e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007653748616576195,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py",
          "lineno": 129,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py",
            "lineno": 129,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_flight_change_with_certificate_only():\n        \"\"\"\n        Policy: \"Whenever flights in a reservation are changed, ensure the user provides one valid gift card or credit card from their profile as the payment or refund method.\"\n        Example: \"A flight update process begins with the user providing only a certificate as payment, despite the requirement for a gift card or credit card.\"\n        \"\"\"\n        user = User(\n            user_id=\"user123\",\n            name=Name(first_name=\"John\", last_name=\"Doe\"),\n            address=Address(address1=\"123 Main St\", address2=None, city=\"New York\", country=\"USA\", state=\"NY\", zip=\"10001\"),\n            email=\"john.doe@example.com\",\n            dob=\"1980-01-01\",\n            payment_methods={\n                \"certificate_123\": Certificate(source=\"certificate\", amount=100.0, id=\"certificate_123\")\n            },\n            saved_passengers=[],\n            membership=\"gold\",\n            reservations=[\"resv001\"]\n        )\n        reservation = Reservation(\n            reservation_id=\"resv001\",\n            user_id=\"user123\",\n            origin=\"JFK\",\n            destination=\"LAX\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL123\", origin=\"JFK\", destination=\"LAX\", date=\"2024-06-01\", price=300)],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n        api = MagicMock(spec=I_Airline)\n        api.get_user_details.side_effect = lambda uid: user if uid == \"user123\" else None\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"resv001\" else None\n    \n        flights = [FlightInfo(flight_number=\"FL123\", date=\"2024-06-02\")]\n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_flights/test_guard_payment_method_requirement_for_flight_changes.py:129: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Whenever flights in a reservation are changed, ensure the user provides one valid gift card or credit card from their profile as the payment or refund method.\"\n    Example: \"A flight update process begins with the user providing only a certificate as payment, despite the requirement for a gift card or credit card.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00015454087406396866,
        "outcome": "passed"
      }
    }
  ]
}