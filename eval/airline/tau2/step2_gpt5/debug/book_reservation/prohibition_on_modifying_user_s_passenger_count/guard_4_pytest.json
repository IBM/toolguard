{
  "created": 1756626121.383221,
  "duration": 0.14334797859191895,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 2,
    "total": 3,
    "collected": 3
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py::test_update_passenger_details_without_count_change",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py::test_attempt_to_increase_passenger_count",
          "type": "Function",
          "lineno": 61
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py::test_attempt_to_decrease_passenger_count",
          "type": "Function",
          "lineno": 112
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py::test_update_passenger_details_without_count_change",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_update_passenger_details_without_count_change",
        "test_guard_prohibition_on_modifying_user_s_passenger_count.py",
        "book_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0008852081373333931,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.002012541051954031,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"The agent must not alter the number of passengers in a reservation once established, though modifications to passenger details like name or date of birth are allowed.\"\n    Example: \"An agent updates passengers' details such as name spelling, date of birth, or contact information without changing the established number of passengers in the reservation.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00013037491589784622,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py::test_attempt_to_increase_passenger_count",
      "lineno": 61,
      "outcome": "failed",
      "keywords": [
        "test_attempt_to_increase_passenger_count",
        "test_guard_prohibition_on_modifying_user_s_passenger_count.py",
        "book_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00012616673484444618,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0012808325700461864,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py",
          "lineno": 97,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py",
            "lineno": 97,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_attempt_to_increase_passenger_count():\n        \"\"\"\n        Policy: \"The agent must not alter the number of passengers in a reservation once established, though modifications to passenger details like name or date of birth are allowed.\"\n        Example: \"An agent attempts to alter the number of passengers in a reservation by changing the count, such as from 2 to 3, violating the policy of immutability on passenger count.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n    \n        existing_reservation = Reservation(\n            reservation_id=\"RES123\",\n            user_id=\"user_001\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL123\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300)],\n            passengers=[\n                Passenger(first_name=\"John\", last_name=\"Doe\", dob=\"1990-01-01\"),\n                Passenger(first_name=\"Jane\", last_name=\"Doe\", dob=\"1992-02-02\")\n            ],\n            payment_history=[Payment(payment_id=\"pay_001\", amount=600)],\n            created_at=(datetime.now() - timedelta(days=10)).strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=2,\n            nonfree_baggages=1,\n            insurance=\"yes\",\n            status=None\n        )\n    \n        api.get_reservation_details.side_effect = lambda reservation_id: existing_reservation if reservation_id == \"RES123\" else None\n    \n        increased_passengers = [\n            Passenger(first_name=\"John\", last_name=\"Doe\", dob=\"1990-01-01\"),\n            Passenger(first_name=\"Jane\", last_name=\"Doe\", dob=\"1992-02-02\"),\n            Passenger(first_name=\"Jim\", last_name=\"Beam\", dob=\"1985-03-03\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py:97: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"The agent must not alter the number of passengers in a reservation once established, though modifications to passenger details like name or date of birth are allowed.\"\n    Example: \"An agent attempts to alter the number of passengers in a reservation by changing the count, such as from 2 to 3, violating the policy of immutability on passenger count.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00020062504336237907,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py::test_attempt_to_decrease_passenger_count",
      "lineno": 112,
      "outcome": "failed",
      "keywords": [
        "test_attempt_to_decrease_passenger_count",
        "test_guard_prohibition_on_modifying_user_s_passenger_count.py",
        "book_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00011599995195865631,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.001161125022917986,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py",
          "lineno": 152,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py",
            "lineno": 152,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_attempt_to_decrease_passenger_count():\n        \"\"\"\n        Policy: \"The agent must not alter the number of passengers in a reservation once established, though modifications to passenger details like name or date of birth are allowed.\"\n        Example: \"The reservation system allows an agent to add or remove passengers, such as reducing the passenger count established from 5 to 4, thereby violating the no-alteration policy.\"\n        \"\"\"\n        api = MagicMock(spec=I_Airline)\n    \n        existing_reservation = Reservation(\n            reservation_id=\"RES123\",\n            user_id=\"user_001\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"FL123\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300)],\n            passengers=[\n                Passenger(first_name=\"John\", last_name=\"Doe\", dob=\"1990-01-01\"),\n                Passenger(first_name=\"Jane\", last_name=\"Doe\", dob=\"1992-02-02\"),\n                Passenger(first_name=\"Jim\", last_name=\"Beam\", dob=\"1985-03-03\"),\n                Passenger(first_name=\"Jack\", last_name=\"Daniels\", dob=\"1980-04-04\"),\n                Passenger(first_name=\"Johnny\", last_name=\"Walker\", dob=\"1975-05-05\")\n            ],\n            payment_history=[Payment(payment_id=\"pay_001\", amount=1500)],\n            created_at=(datetime.now() - timedelta(days=10)).strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=5,\n            nonfree_baggages=3,\n            insurance=\"yes\",\n            status=None\n        )\n    \n        api.get_reservation_details.side_effect = lambda reservation_id: existing_reservation if reservation_id == \"RES123\" else None\n    \n        decreased_passengers = [\n            Passenger(first_name=\"John\", last_name=\"Doe\", dob=\"1990-01-01\"),\n            Passenger(first_name=\"Jane\", last_name=\"Doe\", dob=\"1992-02-02\"),\n            Passenger(first_name=\"Jim\", last_name=\"Beam\", dob=\"1985-03-03\"),\n            Passenger(first_name=\"Jack\", last_name=\"Daniels\", dob=\"1980-04-04\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/book_reservation/test_guard_prohibition_on_modifying_user_s_passenger_count.py:152: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"The agent must not alter the number of passengers in a reservation once established, though modifications to passenger details like name or date of birth are allowed.\"\n    Example: \"The reservation system allows an agent to add or remove passengers, such as reducing the passenger count established from 5 to 4, thereby violating the no-alteration policy.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.0003270418383181095,
        "outcome": "passed"
      }
    }
  ]
}