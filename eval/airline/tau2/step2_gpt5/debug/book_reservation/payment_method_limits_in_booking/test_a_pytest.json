{
  "created": 1756625969.2285922,
  "duration": 0.12456607818603516,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 2,
    "total": 3,
    "collected": 3
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py::test_compliant_one_cert_one_card_two_gift",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py::test_violation_two_cert_four_gift",
          "type": "Function",
          "lineno": 39
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py::test_violation_three_credit_cards",
          "type": "Function",
          "lineno": 73
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py::test_compliant_one_cert_one_card_two_gift",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_compliant_one_cert_one_card_two_gift",
        "test_guard_payment_method_limits_in_booking.py",
        "book_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0009229592978954315,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007175831124186516,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Each reservation can use at most one travel certificate, one credit card, and three gift cards.\"\n    Example: \"A reservation where the user uses one travel certificate, one credit card, and two gift cards, adhering to the payment method limits.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010920781642198563,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py::test_violation_two_cert_four_gift",
      "lineno": 39,
      "outcome": "failed",
      "keywords": [
        "test_violation_two_cert_four_gift",
        "test_guard_payment_method_limits_in_booking.py",
        "book_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.879190474748611e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0005177091807126999,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py",
          "lineno": 71,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/book_reservation/test_guard_payment_method_limits_in_booking.py",
            "lineno": 71,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_violation_two_cert_four_gift():\n        \"\"\"\n        Policy: \"Each reservation can use at most one travel certificate, one credit card, and three gift cards.\"\n        Example: \"A user attempts to book a reservation using two travel certificates and four gift cards, exceeding the policy limits for each of these payment types.\"\n        \"\"\"\n        user = User(\n            user_id=\"user123\",\n            name=Name(first_name=\"Sara\", last_name=\"Doe\"),\n            address=Address(address1=\"123 Main St\", address2=None, city=\"City\", country=\"Country\", state=\"State\", zip=\"12345\"),\n            email=\"sara@example.com\",\n            dob=\"1990-01-01\",\n            payment_methods={},\n            saved_passengers=[],\n            membership=\"gold\",\n            reservations=[]\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_user_details.side_effect = lambda uid: user if uid == \"user123\" else None\n    \n        flights = [FlightInfo(flight_number=\"FL123\", date=\"2024-06-01\")]\n        passengers = [Passenger(first_name=\"John\", last_name=\"Smith\", dob=\"1985-05-05\")]\n        payment_methods = [\n            Certificate(source=\"certificate\", id=\"cert1\", amount=100.0),\n            Certificate(source=\"certificate\", id=\"cert2\", amount=150.0),\n            GiftCard(source=\"gift_card\", id=\"gc1\", amount=50.0),\n            GiftCard(source=\"gift_card\", id=\"gc2\", amount=30.0),\n            GiftCard(source=\"gift_card\", id=\"gc3\", amount=20.0),\n            GiftCard(source=\"gift_card\", id=\"gc4\", amount=10.0)\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/book_reservation/test_guard_payment_method_limits_in_booking.py:71: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Each reservation can use at most one travel certificate, one credit card, and three gift cards.\"\n    Example: \"A user attempts to book a reservation using two travel certificates and four gift cards, exceeding the policy limits for each of these payment types.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00017300015315413475,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py::test_violation_three_credit_cards",
      "lineno": 73,
      "outcome": "failed",
      "keywords": [
        "test_violation_three_credit_cards",
        "test_guard_payment_method_limits_in_booking.py",
        "book_reservation",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.61674377322197e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.000598750077188015,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/book_reservation/test_guard_payment_method_limits_in_booking.py",
          "lineno": 102,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/book_reservation/test_guard_payment_method_limits_in_booking.py",
            "lineno": 102,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_violation_three_credit_cards():\n        \"\"\"\n        Policy: \"Each reservation can use at most one travel certificate, one credit card, and three gift cards.\"\n        Example: \"A reservation is attempted using a combination of three credit cards, violating the policy as only one credit card is permitted per reservation.\"\n        \"\"\"\n        user = User(\n            user_id=\"user123\",\n            name=Name(first_name=\"Sara\", last_name=\"Doe\"),\n            address=Address(address1=\"123 Main St\", address2=None, city=\"City\", country=\"Country\", state=\"State\", zip=\"12345\"),\n            email=\"sara@example.com\",\n            dob=\"1990-01-01\",\n            payment_methods={},\n            saved_passengers=[],\n            membership=\"gold\",\n            reservations=[]\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_user_details.side_effect = lambda uid: user if uid == \"user123\" else None\n    \n        flights = [FlightInfo(flight_number=\"FL123\", date=\"2024-06-01\")]\n        passengers = [Passenger(first_name=\"John\", last_name=\"Smith\", dob=\"1985-05-05\")]\n        payment_methods = [\n            CreditCard(source=\"credit_card\", id=\"cc1\", brand=\"visa\", last_four=\"1234\"),\n            CreditCard(source=\"credit_card\", id=\"cc2\", brand=\"mastercard\", last_four=\"5678\"),\n            CreditCard(source=\"credit_card\", id=\"cc3\", brand=\"amex\", last_four=\"9012\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/book_reservation/test_guard_payment_method_limits_in_booking.py:102: Failed"
      },
      "user_properties": [
        {
          "docstring": "\n    Policy: \"Each reservation can use at most one travel certificate, one credit card, and three gift cards.\"\n    Example: \"A reservation is attempted using a combination of three credit cards, violating the policy as only one credit card is permitted per reservation.\"\n    "
        }
      ],
      "teardown": {
        "duration": 0.00011712498962879181,
        "outcome": "passed"
      }
    }
  ]
}