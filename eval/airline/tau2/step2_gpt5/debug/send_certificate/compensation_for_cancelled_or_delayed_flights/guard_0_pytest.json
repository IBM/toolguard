{
  "created": 1756626017.697608,
  "duration": 0.11665487289428711,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 1,
    "total": 2,
    "collected": 2
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py::TestGuardCompensationForCancelledOrDelayedFlights",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py::TestGuardCompensationForCancelledOrDelayedFlights::test_silver_member_cancelled_flight_two_passengers",
          "type": "Function",
          "lineno": 10
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py::TestGuardCompensationForCancelledOrDelayedFlights::test_regular_member_no_insurance_basic_economy",
          "type": "Function",
          "lineno": 50
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py::TestGuardCompensationForCancelledOrDelayedFlights",
          "type": "Class",
          "lineno": null
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py::TestGuardCompensationForCancelledOrDelayedFlights::test_silver_member_cancelled_flight_two_passengers",
      "lineno": 10,
      "outcome": "passed",
      "keywords": [
        "test_silver_member_cancelled_flight_two_passengers",
        "TestGuardCompensationForCancelledOrDelayedFlights",
        "test_guard_compensation_for_cancelled_or_delayed_flights.py",
        "send_certificate",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0007225829176604748,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0008028331212699413,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: \"If the user is silver/gold member or has travel insurance or flies business, and complains about cancelled flights in a reservation, the agent can offer a certificate as a gesture after confirming the facts, with the amount being $100 times the number of passengers.\"\n        Example: \"After a silver member complains about their flight being canceled, the agent verifies membership and sends a certificate of $100 per passenger to the two passengers in the reservation.\"\n        "
        }
      ],
      "teardown": {
        "duration": 9.341724216938019e-05,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py::TestGuardCompensationForCancelledOrDelayedFlights::test_regular_member_no_insurance_basic_economy",
      "lineno": 50,
      "outcome": "failed",
      "keywords": [
        "test_regular_member_no_insurance_basic_economy",
        "TestGuardCompensationForCancelledOrDelayedFlights",
        "test_guard_compensation_for_cancelled_or_delayed_flights.py",
        "send_certificate",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 8.570915088057518e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0016725421883165836,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py",
          "lineno": 89,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py",
            "lineno": 89,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <test_guard_compensation_for_cancelled_or_delayed_flights.TestGuardCompensationForCancelledOrDelayedFlights object at 0x111ca63c0>\n\n    def test_regular_member_no_insurance_basic_economy(self):\n        \"\"\"\n        Policy: \"Do not compensate if the user is regular member and has no travel insurance and flies (basic) economy.\"\n        Example: \"An agent tries to send a $100 compensation certificate for a canceled flight to a regular member who does not have travel insurance and is traveling in basic economy class, violating the eligibility criteria.\"\n        \"\"\"\n        user = User(\n            user_id=\"user456\",\n            name=Name(first_name=\"Alice\", last_name=\"Smith\"),\n            address=Address(address1=\"456 St\", address2=None, city=\"City\", country=\"Country\", state=\"State\", zip=\"67890\"),\n            email=\"alice@example.com\",\n            dob=\"1990-02-02\",\n            payment_methods={},\n            saved_passengers=[],\n            membership=\"regular\",\n            reservations=[\"resv2\"]\n        )\n        reservation = Reservation(\n            reservation_id=\"resv2\",\n            user_id=\"user456\",\n            origin=\"LAX\",\n            destination=\"ORD\",\n            flight_type=\"one_way\",\n            cabin=\"basic_economy\",\n            flights=[ReservationFlight(flight_number=\"FL456\", origin=\"LAX\", destination=\"ORD\", date=\"2024-06-02\", price=300)],\n            passengers=[Passenger(first_name=\"Alice\", last_name=\"Smith\", dob=\"1990-02-02\")],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=0,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=\"cancelled\"\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_user_details.side_effect = lambda uid: user if uid == \"user456\" else None\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"resv2\" else None\n        api.get_flight_status.side_effect = lambda fn, date: \"cancelled\" if fn == \"FL456\" and date == \"2024-06-02\" else \"on time\"\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/send_certificate/test_guard_compensation_for_cancelled_or_delayed_flights.py:89: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: \"Do not compensate if the user is regular member and has no travel insurance and flies (basic) economy.\"\n        Example: \"An agent tries to send a $100 compensation certificate for a canceled flight to a regular member who does not have travel insurance and is traveling in basic economy class, violating the eligibility criteria.\"\n        "
        }
      ],
      "teardown": {
        "duration": 0.00015441607683897018,
        "outcome": "passed"
      }
    }
  ]
}