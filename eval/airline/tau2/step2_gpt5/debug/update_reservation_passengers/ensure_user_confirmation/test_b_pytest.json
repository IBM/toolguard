{
  "created": 1756626005.685046,
  "duration": 0.11642003059387207,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 1,
    "total": 2,
    "collected": 2
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py::test_email_confirmation_before_update",
          "type": "Function",
          "lineno": 8
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py::test_update_without_user_confirmation",
          "type": "Function",
          "lineno": 39
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py::test_email_confirmation_before_update",
      "lineno": 8,
      "outcome": "passed",
      "keywords": [
        "test_email_confirmation_before_update",
        "test_guard_ensure_user_confirmation.py",
        "update_reservation_passengers",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0007539577782154083,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.000683625228703022,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: Before using ToolX to update passenger information in the booking database, an airline agent must present the details of the changes to the user and obtain explicit confirmation ('yes') from them before proceeding.\n    Example: Before updating the passenger information for reservation 'ZFA04Y', the airline agent sends an email detailing the changes and receives a reply from the user confirming 'yes' before proceeding.\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010720919817686081,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py::test_update_without_user_confirmation",
      "lineno": 39,
      "outcome": "failed",
      "keywords": [
        "test_update_without_user_confirmation",
        "test_guard_ensure_user_confirmation.py",
        "update_reservation_passengers",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 8.983304724097252e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0005287076346576214,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py",
          "lineno": 68,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_passengers/test_guard_ensure_user_confirmation.py",
            "lineno": 68,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_update_without_user_confirmation():\n        \"\"\"\n        Policy: Before using ToolX to update passenger information in the booking database, an airline agent must present the details of the changes to the user and obtain explicit confirmation ('yes') from them before proceeding.\n        Example: An airline agent updates the passenger information for a reservation without displaying the changes to the user or obtaining explicit confirmation from them, violating the policy that requires a 'yes' confirmation before proceeding.\n        \"\"\"\n    \n        reservation = Reservation(\n            reservation_id=\"ZFA04Y\",\n            user_id=\"user123\",\n            origin=\"SFO\",\n            destination=\"JFK\",\n            flight_type=\"one_way\",\n            cabin=\"economy\",\n            flights=[ReservationFlight(flight_number=\"HAT001\", origin=\"SFO\", destination=\"JFK\", date=\"2024-06-01\", price=300)],\n            passengers=[Passenger(first_name=\"John\", last_name=\"Doe\", dob=\"1990-01-01\")],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"ZFA04Y\" else None\n    \n        passengers = [Passenger(first_name=\"Jane\", last_name=\"Smith\", dob=\"1992-02-02\")]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_passengers/test_guard_ensure_user_confirmation.py:68: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: Before using ToolX to update passenger information in the booking database, an airline agent must present the details of the changes to the user and obtain explicit confirmation ('yes') from them before proceeding.\n    Example: An airline agent updates the passenger information for a reservation without displaying the changes to the user or obtaining explicit confirmation from them, violating the policy that requires a 'yes' confirmation before proceeding.\n    "
        }
      ],
      "teardown": {
        "duration": 0.00017095822840929031,
        "outcome": "passed"
      }
    }
  ]
}