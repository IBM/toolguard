{
  "created": 1756625960.2795,
  "duration": 0.21502685546875,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 2,
    "total": 3,
    "collected": 3
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py::test_update_passenger_info_no_count_change",
          "type": "Function",
          "lineno": 7
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py::test_attempt_change_passenger_count_additional",
          "type": "Function",
          "lineno": 49
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py::test_attempt_change_passenger_count_reduction",
          "type": "Function",
          "lineno": 90
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py::test_update_passenger_info_no_count_change",
      "lineno": 7,
      "outcome": "passed",
      "keywords": [
        "test_update_passenger_info_no_count_change",
        "test_guard_transfer_requirement_for_human_assistance.py",
        "update_reservation_passengers",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0011536250822246075,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007209586910903454,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: Agents must transfer to a human agent only if passenger modification requests surpass the capabilities of 'update_reservation_passengers'.\n    Example: A user requests to update passenger information for a reservation, ensuring the passenger count remains unchanged.\n    "
        }
      ],
      "teardown": {
        "duration": 0.00010941596701741219,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py::test_attempt_change_passenger_count_additional",
      "lineno": 49,
      "outcome": "failed",
      "keywords": [
        "test_attempt_change_passenger_count_additional",
        "test_guard_transfer_requirement_for_human_assistance.py",
        "update_reservation_passengers",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 9.008310735225677e-05,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0005087084136903286,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py",
          "lineno": 87,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py",
            "lineno": 87,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_attempt_change_passenger_count_additional():\n        \"\"\"\n        Policy: Must transfer to human agent if passenger count changes.\n        Example: Agent attempts to change the number of passengers, such as adding an extra passenger.\n        \"\"\"\n    \n        # Mock reservation with 2 passengers\n        reservation = Reservation(\n            reservation_id=\"DEF456\",\n            user_id=\"user_2\",\n            origin=\"LAX\",\n            destination=\"ORD\",\n            flight_type=\"one_way\",\n            cabin=\"business\",\n            flights=[],\n            passengers=[\n                Passenger(first_name=\"Alice\", last_name=\"Wonder\", dob=\"1985-03-03\"),\n                Passenger(first_name=\"Bob\", last_name=\"Builder\", dob=\"1980-04-04\")\n            ],\n            payment_history=[],\n            created_at=\"2024-05-02T11:00:00\",\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"DEF456\" else None\n    \n        # Invoke function under test with increased passenger count\n        passengers_update = [\n            Passenger(first_name=\"Alice\", last_name=\"Wonder\", dob=\"1985-03-03\"),\n            Passenger(first_name=\"Bob\", last_name=\"Builder\", dob=\"1980-04-04\"),\n            Passenger(first_name=\"Charlie\", last_name=\"Chaplin\", dob=\"1975-05-05\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py:87: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: Must transfer to human agent if passenger count changes.\n    Example: Agent attempts to change the number of passengers, such as adding an extra passenger.\n    "
        }
      ],
      "teardown": {
        "duration": 0.00025679124519228935,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py::test_attempt_change_passenger_count_reduction",
      "lineno": 90,
      "outcome": "failed",
      "keywords": [
        "test_attempt_change_passenger_count_reduction",
        "test_guard_transfer_requirement_for_human_assistance.py",
        "update_reservation_passengers",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00012091686949133873,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007137502543628216,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py",
          "lineno": 128,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py",
            "lineno": 128,
            "message": "Failed"
          }
        ],
        "longrepr": "def test_attempt_change_passenger_count_reduction():\n        \"\"\"\n        Policy: Must transfer to human agent if passenger count changes.\n        Example: Agent handles a reservation update request to modify passenger numbers from 3 to 2.\n        \"\"\"\n    \n        # Mock reservation with 3 passengers\n        reservation = Reservation(\n            reservation_id=\"GHI789\",\n            user_id=\"user_3\",\n            origin=\"MIA\",\n            destination=\"SEA\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[],\n            passengers=[\n                Passenger(first_name=\"Tom\", last_name=\"Thumb\", dob=\"1995-06-06\"),\n                Passenger(first_name=\"Jerry\", last_name=\"Mouse\", dob=\"1994-07-07\"),\n                Passenger(first_name=\"Spike\", last_name=\"Bulldog\", dob=\"1993-08-08\")\n            ],\n            payment_history=[],\n            created_at=\"2024-05-03T12:00:00\",\n            total_baggages=3,\n            nonfree_baggages=1,\n            insurance=\"yes\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"GHI789\" else None\n    \n        # Invoke function under test with reduced passenger count\n        passengers_update = [\n            Passenger(first_name=\"Tom\", last_name=\"Thumb\", dob=\"1995-06-06\"),\n            Passenger(first_name=\"Jerry\", last_name=\"Mouse\", dob=\"1994-07-07\")\n        ]\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_passengers/test_guard_transfer_requirement_for_human_assistance.py:128: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n    Policy: Must transfer to human agent if passenger count changes.\n    Example: Agent handles a reservation update request to modify passenger numbers from 3 to 2.\n    "
        }
      ],
      "teardown": {
        "duration": 0.0001561250537633896,
        "outcome": "passed"
      }
    }
  ]
}