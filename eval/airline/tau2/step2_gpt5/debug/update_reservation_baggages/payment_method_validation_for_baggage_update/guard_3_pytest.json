{
  "created": 1756626083.1020522,
  "duration": 0.14848732948303223,
  "exitcode": 1,
  "root": "/Users/davidboaz/Documents/GitHub/gen_policy_validator",
  "environment": {},
  "summary": {
    "failed": 2,
    "total": 4,
    "collected": 4
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py",
          "type": "Module",
          "lineno": null
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_credit_card_stored_in_profile",
          "type": "Function",
          "lineno": 10
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_certificate_not_in_profile_raises",
          "type": "Function",
          "lineno": 52
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_multiple_gift_cards_exceeding_limit",
          "type": "Function",
          "lineno": 92
        },
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_multiple_certificates_exceeding_limit",
          "type": "Function",
          "lineno": 135
        }
      ],
      "longrepr": null
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate",
          "type": "Class",
          "lineno": null
        }
      ],
      "longrepr": null
    }
  ],
  "tests": [
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_credit_card_stored_in_profile",
      "lineno": 10,
      "outcome": "passed",
      "keywords": [
        "test_credit_card_stored_in_profile",
        "TestGuardPaymentMethodValidationForBaggageUpdate",
        "test_guard_payment_method_validation_for_baggage_update.py",
        "update_reservation_baggages",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.001124958973377943,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.000829583965241909,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: Ensure the payment method used is stored in the user's profile before using the 'update_reservation_baggages' tool.\n        Example: A user successfully updates their reservation baggages using a credit card stored in their profile, ensuring secure payment.\n        "
        }
      ],
      "teardown": {
        "duration": 0.00013154186308383942,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_certificate_not_in_profile_raises",
      "lineno": 52,
      "outcome": "passed",
      "keywords": [
        "test_certificate_not_in_profile_raises",
        "TestGuardPaymentMethodValidationForBaggageUpdate",
        "test_guard_payment_method_validation_for_baggage_update.py",
        "update_reservation_baggages",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.0011805417016148567,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0027130418457090855,
        "outcome": "passed",
        "crash": null,
        "traceback": null,
        "longrepr": null
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: Ensure the payment method used is stored in the user's profile before using the 'update_reservation_baggages' tool.\n        Example: A user attempts to update their reservation baggages using a certificate or credit card that is not stored in their profile, which leads to transaction insecurity.\n        "
        }
      ],
      "teardown": {
        "duration": 0.0002637500874698162,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_multiple_gift_cards_exceeding_limit",
      "lineno": 92,
      "outcome": "failed",
      "keywords": [
        "test_multiple_gift_cards_exceeding_limit",
        "TestGuardPaymentMethodValidationForBaggageUpdate",
        "test_guard_payment_method_validation_for_baggage_update.py",
        "update_reservation_baggages",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00016637519001960754,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0009171669371426105,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py",
          "lineno": 133,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py",
            "lineno": 133,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <test_guard_payment_method_validation_for_baggage_update.TestGuardPaymentMethodValidationForBaggageUpdate object at 0x104447200>\n\n    def test_multiple_gift_cards_exceeding_limit(self):\n        \"\"\"\n        Policy: Payment: each reservation can use at most one travel certificate, at most one credit card, and at most three gift cards.\n        Example: A user tries to update their reservation baggages using multiple gift cards, exceeding the allowed limit and thus violating payment method constraints.\n        \"\"\"\n        gift_cards = {\n            f\"gift_card_{i}\": GiftCard(source=\"gift_card\", id=f\"gift_card_{i}\", amount=100.0) for i in range(4)\n        }\n        user = User(\n            user_id=\"user123\",\n            name=Name(first_name=\"John\", last_name=\"Doe\"),\n            address=Address(address1=\"123 Main St\", address2=None, city=\"New York\", country=\"USA\", state=\"NY\", zip=\"10001\"),\n            email=\"john.doe@example.com\",\n            dob=\"1990-01-01\",\n            payment_methods=gift_cards,\n            saved_passengers=[],\n            membership=\"gold\",\n            reservations=[\"resv001\"]\n        )\n        reservation = Reservation(\n            reservation_id=\"resv001\",\n            user_id=\"user123\",\n            origin=\"JFK\",\n            destination=\"LAX\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_user_details.side_effect = lambda uid: user if uid == \"user123\" else None\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"resv001\" else None\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py:133: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: Payment: each reservation can use at most one travel certificate, at most one credit card, and at most three gift cards.\n        Example: A user tries to update their reservation baggages using multiple gift cards, exceeding the allowed limit and thus violating payment method constraints.\n        "
        }
      ],
      "teardown": {
        "duration": 0.00018695788457989693,
        "outcome": "passed"
      }
    },
    {
      "nodeid": "eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py::TestGuardPaymentMethodValidationForBaggageUpdate::test_multiple_certificates_exceeding_limit",
      "lineno": 135,
      "outcome": "failed",
      "keywords": [
        "test_multiple_certificates_exceeding_limit",
        "TestGuardPaymentMethodValidationForBaggageUpdate",
        "test_guard_payment_method_validation_for_baggage_update.py",
        "update_reservation_baggages",
        "tests",
        "2025-08-31_10_38_30",
        "output",
        "airline",
        "eval",
        "gen_policy_validator",
        ""
      ],
      "setup": {
        "duration": 0.00012916699051856995,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0008065826259553432,
        "outcome": "failed",
        "crash": {
          "path": "/Users/davidboaz/Documents/GitHub/gen_policy_validator/eval/airline/output/2025-08-31_10_38_30/tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py",
          "lineno": 176,
          "message": "Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>"
        },
        "traceback": [
          {
            "path": "tests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py",
            "lineno": 176,
            "message": "Failed"
          }
        ],
        "longrepr": "self = <test_guard_payment_method_validation_for_baggage_update.TestGuardPaymentMethodValidationForBaggageUpdate object at 0x103be91f0>\n\n    def test_multiple_certificates_exceeding_limit(self):\n        \"\"\"\n        Policy: Payment: each reservation can use at most one travel certificate.\n        Example: A user attempts to use a combination of certificates for paying the baggage update, exceeding the allowed limit per reservation.\n        \"\"\"\n        certificates = {\n            f\"certificate_{i}\": Certificate(source=\"certificate\", id=f\"certificate_{i}\", amount=200.0) for i in range(2)\n        }\n        user = User(\n            user_id=\"user123\",\n            name=Name(first_name=\"John\", last_name=\"Doe\"),\n            address=Address(address1=\"123 Main St\", address2=None, city=\"New York\", country=\"USA\", state=\"NY\", zip=\"10001\"),\n            email=\"john.doe@example.com\",\n            dob=\"1990-01-01\",\n            payment_methods=certificates,\n            saved_passengers=[],\n            membership=\"gold\",\n            reservations=[\"resv001\"]\n        )\n        reservation = Reservation(\n            reservation_id=\"resv001\",\n            user_id=\"user123\",\n            origin=\"JFK\",\n            destination=\"LAX\",\n            flight_type=\"round_trip\",\n            cabin=\"economy\",\n            flights=[],\n            passengers=[],\n            payment_history=[],\n            created_at=datetime.now().strftime(\"%Y-%m-%dT%H:%M:%S\"),\n            total_baggages=1,\n            nonfree_baggages=0,\n            insurance=\"no\",\n            status=None\n        )\n    \n        api = MagicMock(spec=I_Airline)\n        api.get_user_details.side_effect = lambda uid: user if uid == \"user123\" else None\n        api.get_reservation_details.side_effect = lambda rid: reservation if rid == \"resv001\" else None\n    \n>       with pytest.raises(PolicyViolationException):\nE       Failed: DID NOT RAISE <class 'rt_toolguard.data_types.PolicyViolationException'>\n\ntests/update_reservation_baggages/test_guard_payment_method_validation_for_baggage_update.py:176: Failed"
      },
      "user_properties": [
        {
          "docstring": " \n        Policy: Payment: each reservation can use at most one travel certificate.\n        Example: A user attempts to use a combination of certificates for paying the baggage update, exceeding the allowed limit per reservation.\n        "
        }
      ],
      "teardown": {
        "duration": 0.00016308389604091644,
        "outcome": "passed"
      }
    }
  ]
}